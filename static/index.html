<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>NewsBot Painel</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        input { width: 300px; padding: 5px; }
        button { padding: 5px 10px; margin-left: 10px; }
        .news-item { border-bottom: 1px solid #ccc; margin-top: 20px; padding-bottom: 10px; }
        img { max-width: 300px; display: block; margin-top: 5px; margin-bottom: 5px; }
    </style>
</head>
<body>
    <h1>NewsBot Painel</h1>
    <p>Informe palavras-chave separadas por vírgula:</p>
    <input type="text" id="keywords" placeholder="exemplo, notícia, tecnologia" value="exemplo, notícia, tecnologia" />
    <button onclick="atualizar()">Atualizar</button>

    <h2>Notícias Coletadas</h2>
    <div id="news"></div>

    <script>
        async function atualizar() {
            const input = document.getElementById("keywords").value;
            const keywords = input.split(",").map(k => k.trim()).filter(k => k.length > 0);
            const response = await fetch("/keywords", {
                method: "POST",
                headers: {"Content-Type": "application/json"},
                body: JSON.stringify(keywords)
            });
            const data = await response.json();
            alert(data.message);
            buscarNoticias();
        }

        async function buscarNoticias() {
            const response = await fetch("/news");
            const news = await response.json();
            const container = document.getElementById("news");
            container.innerHTML = news.map(n => `
                <div class="news-item">
                    <h3>${n.title}</h3>
                    ${n.image_url ? `<img src="${n.image_url}" alt="Imagem">` : ''}
                    <p>${n.generated_text}</p>
                </div>
            `).join("");
        }

        buscarNoticias();
    </script>
</body>
</html>
